webpackJsonp([4],{"75l9":function(t,e){t.exports={_from:"axios",_id:"axios@0.21.4",_inBundle:!1,_integrity:"sha1-xnuQ3AVo5cHPKwuFjEO6KOLtpXU=",_location:"/axios",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"axios",name:"axios",escapedName:"axios",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.nlark.com/axios/download/axios-0.21.4.tgz?cache=0&sync_timestamp=1630942912149&other_urls=https%3A%2F%2Fregistry.nlark.com%2Faxios%2Fdownload%2Faxios-0.21.4.tgz",_shasum:"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575",_spec:"axios",_where:"E:\\饥人谷\\vue.js开发云笔记三周目\\blog-client",author:{name:"Matt Zabriskie"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs:{url:"https://github.com/axios/axios/issues"},bundleDependencies:!1,bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies:{"follow-redirects":"^1.14.0"},deprecated:!1,description:"Promise based HTTP client for the browser and node.js",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},homepage:"https://axios-http.com",jsdelivr:"dist/axios.min.js",keywords:["xhr","http","ajax","promise","node"],license:"MIT",main:"index.js",name:"axios",repository:{type:"git",url:"git+https://github.com/axios/axios.git"},scripts:{build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",fix:"eslint --fix lib/**/*.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings:"./index.d.ts",unpkg:"dist/axios.min.js",version:"0.21.4"}},EJZp:function(t,e,o){"use strict";var n=o("7+uW");e.a=new n.default},EXqy:function(t,e){},F5VV:function(t,e,o){"use strict";var n=o("//Fk"),r=o.n(n),s=o("p+dL"),a=o("VmfC"),i={GET:"/notes/from/:notebookId",ADD:"/notes/to/:notebookId",UPDATE:"/notes/:noteId",DELETE:"/notes/:noteId"};e.a={getAll:function(t){var e=t.notebookId;return new r.a(function(t,o){Object(s.a)(i.GET.replace(":notebookId",e)).then(function(e){e.data=e.data.map(function(t){return t.createdAtFriendly=Object(a.a)(t.createdAt),t.updatedAtFriendly=Object(a.a)(t.updatedAt),t}).sort(function(t,e){return t.updatedAt<e.updatedAt}),t(e)}).catch(function(t){o(t)})})},updateNote:function(t,e){var o=t.noteId,n=e.title,r=e.content;return Object(s.a)(i.UPDATE.replace(":noteId",o),"PATCH",{title:n,content:r})},deleteNote:function(t){var e=t.noteId;return Object(s.a)(i.DELETE.replace(":noteId",e),"DELETE")},addNote:function(t){var e=t.notebookId,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:"",content:""},n=o.title,u=void 0===n?"":n,c=o.content,d=void 0===c?"":c;return new r.a(function(t,o){Object(s.a)(i.ADD.replace(":notebookId",e),"POST",{title:u,content:d}).then(function(e){e.data.createdAtFriendly=Object(a.a)(e.data.createdAt),e.data.updatedAtFriendly=Object(a.a)(e.data.updatedAt),t(e)}).catch(function(t){o(t)})})}}},Iaob:function(t,e){},JLO5:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("7+uW"),r=o("Dd8w"),s=o.n(r),a=o("Q98j"),i=o("NYxO"),u={data:function(){return{}},created:function(){this.setUser()},methods:s()({},Object(i.b)({setUser:"checkLogin"})),computed:s()({},Object(i.c)(["username","slug"]))},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{attrs:{title:this.username}},[this._v(this._s(this.slug))])])},staticRenderFns:[]};var d=o("VU/8")(u,c,!1,function(t){o("JLO5")},"data-v-780155d1",null).exports,l=o("EJZp"),f={components:{avatar:d},inject:["reload"],methods:s()({},Object(i.b)(["addNote","addNotebook","deleteNotebook"]),Object(i.d)(["setCurNote","setCurBook"]),{onLogout:function(){var t=this;a.a.logout().then(function(e){console.log(e),l.a.$emit("out",e),t.$store.login=!1,t.$router.push({path:"/"}),t.reload()})},deleteBook:function(){console.log(this.curBook.id),this.deleteNotebook({notebookId:this.curBook.id})},onaddNote:function(){var t=this;this.$store.state.noteIndex=!0,document.querySelector("#trash").classList.remove("show"),console.log(this.curBook.id),null==this.curBook.id?this.addNotebook({title:"我的第一个笔记本"}).then(function(){t.addNote({notebookId:t.curBook.id}).then(function(e){t.setCurNote({curNoteId:e})}),t.$router.push({path:"/empty"})}):this.addNote({notebookId:this.curBook.id}).then(function(e){t.setCurNote({curNoteId:e})})},note:function(){this.$store.state.noteIndex=!0,document.querySelector("#trash").classList.remove("show"),document.querySelectorAll("#sidebar .icons i").forEach(function(t){return t.classList.remove("show")}),document.querySelector("#sidebar .note").classList.add("show"),this.$store.bookappear&&(document.querySelector("#note-detail #booklist").classList.remove("show"),setTimeout(function(){return document.querySelector("#note-detail #booklist").classList.remove("appear")},250),this.$store.bookappear=!this.$store.bookappear)},book:function(){document.querySelectorAll("#sidebar .icons i").forEach(function(t){return t.classList.remove("show")}),document.querySelector("#note-detail #booklist")&&(this.$store.bookappear?(document.querySelector("#note-detail #booklist").classList.remove("show"),setTimeout(function(){return document.querySelector("#note-detail #booklist").classList.remove("appear")},250),this.$store.bookappear=!this.$store.bookappear,document.querySelector("#sidebar .note").classList.add("show")):(document.querySelector("#note-detail #booklist").classList.add("appear"),setTimeout(function(){return document.querySelector("#note-detail #booklist").classList.add("show")}),this.$store.bookappear=!this.$store.bookappear,document.querySelector("#sidebar .book").classList.add("show")))}}),computed:s()({},Object(i.c)(["curBook","curNote"]))},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"sidebar"}},[o("div",{staticClass:"sidebar-con"},[o("div",{staticClass:"login"},[o("avatar",{staticClass:"avatar"}),t._v(" "),o("div",{staticClass:"icons"},[o("div",{staticClass:"addNote"},[o("i",{staticClass:"el-icon-plus",on:{click:t.onaddNote}})]),t._v(" "),o("router-link",{attrs:{to:"/note",title:"笔记"}},[o("i",{staticClass:"note el-icon-s-order show",on:{click:t.note}})]),t._v(" "),o("router-link",{attrs:{to:"/note",title:"文件夹"}},[o("i",{staticClass:"book el-icon-s-platform",on:{click:t.book}})])],1)],1),t._v(" "),o("div",{staticClass:"logout",on:{click:t.onLogout}},[o("i",{staticClass:"el-icon-switch-button"})])])])},staticRenderFns:[]};var p={name:"App",data:function(){return{isRouterAlive:!0}},components:{Sidebar:o("VU/8")(f,h,!1,function(t){o("EXqy")},"data-v-07726605",null).exports},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})},provide:function(){return{reload:this.reload}}}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Sidebar",{attrs:{id:"sidebar"}}),this._v(" "),this.isRouterAlive?e("router-view"):this._e()],1)},staticRenderFns:[]};var b=o("VU/8")(p,m,!1,function(t){o("Iaob")},null,null).exports,k=o("/ocq");n.default.use(k.a);var v=new k.a({routes:[{path:"/",name:"Login",component:function(){return o.e(1).then(o.bind(null,"xJsL"))}},{path:"/note",component:function(){return o.e(0).then(o.bind(null,"Gb2o"))}},{path:"/empty",component:function(){return o.e(2).then(o.bind(null,"KeBu"))}}]}),g=o("mtWM"),N=o.n(g),I=o("zL8q"),T=o.n(I),E={poi:"hello Vuex",count:0,toTest:"aac"},w={state:E,getters:{poi:function(t){return t.poi},toTest:function(t){return t.toTest}},mutations:{setCount:function(t,e){t.count=e,console.log("state.count","mutations",t.count),t.count++,console.log("state.count","mutations",t.count)}},actions:{add:function(t,e){(0,t.commit)("setCount",e),console.log("state.count","actions",E.count)},arr:function(){console.log("arr")}}},j=o("//Fk"),x=o.n(j),A=o("p+dL"),y={GET:"/notebooks",ADD:"/notebooks",UPDATE:"/notebooks/:id",DELETE:"/notebooks/:id"},L=function(){return Object(A.a)(y.GET)},O=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:""}).title,o=void 0===e?"":e;return Object(A.a)(y.UPDATE.replace(":id",t),"PATCH",{title:o})},_=function(t){return Object(A.a)(y.DELETE.replace(":id",t),"DELETE")},C=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:""}).title,e=void 0===t?"":t;return Object(A.a)(y.ADD,"POST",{title:e})},D={state:{notebooks:null,curBookId:null},getters:{notebooks:function(t){return t.notebooks||[]},curBook:function(t){return Array.isArray(t.notebooks)?t.curBookId?t.notebooks.find(function(e){return e.id==t.curBookId})||{}:t.notebooks[0]||{}:{}}},mutations:{setNotebooks:function(t,e){t.notebooks=e.notebooks},addNotebook:function(t,e){t.notebooks.unshift(e.notebook)},updateNotebook:function(t,e){(t.notebooks.find(function(t){return t.id==e.notebookId})||{}).title=e.title},deleteNotebook:function(t,e){t.notebooks=t.notebooks.filter(function(t){return t.id!=e.notebookId})},setCurBook:function(t,e){t.curBookId=e.curBookId}},actions:{getNotebooks:function(t){var e=t.commit;return null!==t.state.notebooks?x.a.resolve():L().then(function(t){e("setNotebooks",{notebooks:t.data})})},addNotebook:function(t,e){var o=t.commit;return C({title:e.title}).then(function(t){console.log("add success...",t),o("addNotebook",{notebook:t.data}),I.Message.success(t.msg)})},updateNotebook:function(t,e){var o=t.commit;return O(e.notebookId,{title:e.title}).then(function(t){o("updateNotebook",{notebookId:e.notebookId,title:e.title}),I.Message.success(t.msg)})},deleteNotebook:function(t,e){var o=t.commit;return _(e.notebookId).then(function(t){o("deleteNotebook",{notebookId:e.notebookId}),I.Message.success(t.msg)})}}},S=o("F5VV"),q={state:{notes:null,curNoteId:null},getters:{notes:function(t){return t.notes||[]},curNote:function(t){return Array.isArray(t.notes)?t.curNoteId?t.notes.find(function(e){return e.id==t.curNoteId})||{title:"",content:""}:t.notes[0]||{title:"",content:""}:{title:"",content:""}}},mutations:{setNote:function(t,e){t.notes=e.notes},addNote:function(t,e){t.notes.unshift(e.note)},updateNote:function(t,e){var o=t.notes.find(function(t){return t.id===e.noteId})||{};o.title=e.title,o.content=e.content},deleteNote:function(t,e){t.notes=t.notes.filter(function(t){return t.id!==e.noteId})},setCurNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.curNoteId=e.curNoteId}},actions:{getNotes:function(t,e){var o=t.commit,n=e.notebookId;return S.a.getAll({notebookId:n}).then(function(t){o("setNote",{notes:t.data})})},addNote:function(t,e){var o=t.commit,n=e.notebookId,r=e.title,s=e.content;return S.a.addNote({notebookId:n},{title:r,content:s}).then(function(t){return console.log("add success...",t),o("addNote",{note:t.data}),t.data.id})},updateNote:function(t,e){var o=t.commit,n=e.noteId,r=e.title,s=e.content;return S.a.updateNote({noteId:n},{title:r,content:s}).then(function(t){o("updateNote",{noteId:n,title:r,content:s})})},deleteNote:function(t,e){var o=t.commit,n=e.noteId;return S.a.deleteNote({noteId:n}).then(function(t){o("deleteNote",{noteId:n}),I.Message.success(t.msg)})}}},F=o("VmfC"),B={GET:"/notes/trash",REVERT:"/notes/:noteId/revert",DELETE:"/notes/:noteId/confirm"},$=function(){return new x.a(function(t,e){Object(A.a)(B.GET).then(function(e){e.data=e.data.sort(function(t,e){return t.createdAt<e.createdAt}),e.data.forEach(function(t){t.createdAtFriendly=Object(F.a)(t.createdAt),t.updatedAtFriendly=Object(F.a)(t.updatedAt)}),t(e)}).catch(function(t){e(t)})})},U=function(t){var e=t.noteId;return Object(A.a)(B.DELETE.replace(":noteId",e),"DELETE")},M=function(t){var e=t.noteId;return Object(A.a)(B.REVERT.replace(":noteId",e),"PATCH")},V={state:{trashNotes:null,curTrashNoteId:null},getters:{trashNotes:function(t){return t.trashNotes||[]},curTrashNote:function(t,e){return t.curTrashNoteId?t.trashNotes.find(function(e){return e.id==t.curTrashNoteId})||{}:e.trashNotes[0]||{}},belongTo:function(t,e,o,n){return(n.notebooks.find(function(t){return t.id==e.curTrashNote.notebookId})||{}).title||""}},mutations:{setTrashNotes:function(t,e){t.trashNotes=e.trashNotes},addTrashNote:function(t,e){setTrashNotes.unshift(e.note)},deleteTrashNote:function(t,e){t.trashNotes=t.trashNotes.filter(function(t){return t.id!=e.noteId})},setCurTrashNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.curTrashNoteId=e.curTrashNoteId}},actions:{getTrashNotes:function(t){var e=t.commit;return $().then(function(t){e("setTrashNotes",{trashNotes:t.data})})},deleteTrashNote:function(t,e){var o=t.commit,n=e.noteId;return U({noteId:n}).then(function(t){o("deleteTrashNote",{noteId:n}),I.Message.success(t.msg)})},revertTrashNote:function(t,e){var o=t.commit,n=e.noteId;return M({noteId:n}).then(function(t){o("deleteTrashNote",{noteId:n}),I.Message.success(t.msg)})}}},P={state:{user:null},getters:{username:function(t){return null===t.user?"未登录":t.user.username},slug:function(t){return null===t.user?"未":t.user.username.charAt(0)}},mutations:{setUser:function(t,e){t.user=e.user}},actions:{login:function(t,e){var o=t.commit,n=e.username,r=e.password;return a.a.login({username:n,password:r}).then(function(t){o("setUser",{user:t.data})})},register:function(t,e){var o=t.commit,n=e.username,r=e.password;return a.a.register({username:n,password:r}).then(function(t){o("setUser",{user:t.data})})},logout:function(t){var e=t.commit,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{path:"/"};return a.a.logout().then(function(t){e("setUser",{user:null}),console.log(o),v.push(o)})},checkLogin:function(t){var e=t.commit,o=t.state,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{path:"/"};return null!==o.user?x.a.resolve():a.a.getInfo().then(function(t){t.isLogin?e("setUser",{user:t.data}):(console.log("jump"),v.push(n))})}}};n.default.use(i.a);var R=new i.a.Store({modules:{test:w,notebook:D,note:q,trash:V,user:P},state:{poi:"hello Vuex",bookappear:!1,noteIndex:!0,login:!1}});o("tvR6"),o("tIhq");n.default.use(T.a),n.default.prototype.$axios=N.a,n.default.config.productionTip=!1,new n.default({el:"#app",router:v,store:R,components:{App:b},template:"<App/>"})},Q98j:function(t,e,o){"use strict";var n=o("p+dL"),r="/auth/register",s="/auth/login",a="/auth",i="/auth/logout";e.a={register:function(t){var e=t.username,o=t.password;return Object(n.a)(r,"POST",{username:e,password:o})},login:function(t){var e=t.username,o=t.password;return Object(n.a)(s,"POST",{username:e,password:o})},getInfo:function(){return Object(n.a)(a)},logout:function(){return Object(n.a)(i)}}},VmfC:function(t,e,o){"use strict";e.a=function(t){var e=("object"===(void 0===t?"undefined":r()(t))?t:new Date(t)).getTime(),o=Date.now()-e,n="";switch(!0){case o<6e4:n="刚刚";break;case o<36e5:n=Math.floor(o/6e4)+"分钟前";break;case o<864e5:n=Math.floor(o/36e5)+"小时前";break;default:n=Math.floor(o/864e5)+"天前"}return n};var n=o("pFYg"),r=o.n(n)},"p+dL":function(t,e,o){"use strict";e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new r.a(function(n,r){var s={url:t,method:e,validateStatus:function(t){return t>=200&&t<300||400===t}};"get"===e.toLowerCase()?s.params=o:s.data=o,a()(s).then(function(t){200===t.status?n(t.data):(i.Message.error(t.data.msg),r(t.data))}).catch(function(t){i.Message.error("网络异常"),r({msg:"网络异常"})})})};var n=o("//Fk"),r=o.n(n),s=o("mtWM"),a=o.n(s),i=o("zL8q");o.n(i);a.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",a.a.defaults.baseURL="https://note-server.hunger-valley.com",a.a.defaults.withCredentials=!0},tIhq:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b448431dd37986f4d946.js.map